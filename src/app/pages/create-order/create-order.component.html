<div class="create-order-section">

    <div class="col-xxl-7">

        <mat-accordion>
        
            <mat-expansion-panel class="mat-elevation-z1" [expanded]="step === 0" hideToggle>
        
                <mat-expansion-panel-header class="px-1 bg-body-secondary rounded-0 px-3" style="height: 50px !important;">
    
                    <mat-panel-title class="text-primary-emphasis"> 
                        
                        <div class="py-1 lh-1 px-2 bg-white rounded small me-2">1</div> Customer Details 
                    
                    </mat-panel-title>
    
                </mat-expansion-panel-header>
    
                <div class="rounded-2 p-3" [formGroup]="orderForm">
    
                    <div class="d-flex align-items-center">
    
                        <input class="form-control form-control-lg border-1 w-100" type="text" placeholder="Search By Mobile or Email" formControlName="searchCustomer" (keyup)="formSubmitted.customerSearched = false;" style="max-width: 360px;">
    
                        <button class="btn rounded-pill ms-2 d-flex align-items-center justify-content-center text-white" style="width: 45px;height: 45px;background: #288BE6;">
                
                            <img src="./assets/images/add-user.svg" *ngIf="formSubmitted.customerSearched">
    
                            <i class="bx bx-search-alt h3 mb-0 lh-1" *ngIf="!formSubmitted.customerSearched" (click)="searchCustomer()"></i>
    
                        </button>
    
                    </div>
    
                    <div class="mt-3" *ngIf="f.customerDetails.value as customerDet">

                        <div class="d-flex">

                            <label class="small text-secondary me-2" style="width: 50px;">Name</label>

                            <p class="small fw-600">{{ customerDet.firstName + " " + customerDet.lastName }}</p>

                        </div>

                        <div class="d-flex">

                            <label class="small text-secondary me-2" style="width: 50px;">Email</label>

                            <p class="small fw-600">{{ customerDet.email }}</p>

                        </div>

                        <div class="d-flex">

                            <label class="small text-secondary me-2" style="width: 50px;">Phone</label>

                            <p class="small fw-600">{{ customerDet.dialCode + "" + customerDet.mobile }}</p>

                        </div>

                        <button class="mb-2 btn btn-primary px-4 py-2 rounded" *ngIf="!f.isExistingCustomer.value">Add Customer</button>
                            
                        <p class="mb-0 small text-light" style="font-size: 12px;" *ngIf="!f.isExistingCustomer.value">
                            
                            *The Customer is not registered with us. Please add the customer details.
                        
                        </p>
    
                    </div>
    
                </div>
    
                <div class="px-3 pb-2 text-end" *ngIf="f.isExistingCustomer.value || _.isEmpty(f.customerDetails.value)">
    
                    <button class="btn btn-primary btn-sm px-5">CONTINUE</button>
    
                </div>
        
            </mat-expansion-panel>
        
        </mat-accordion>

    </div>
    

</div>

<asidebar #canvas [title]="canvasConfig['canvasTitle']" [openCanvas]="openCanvas" [showCancelBtn]="canvasConfig['showCancelBtn']" [cancelBtnTxt]="canvasConfig['cancelBtnTxt']" [applyBtnTxt]="canvasConfig['applyBtnTxt']" (onClose)="openCanvas = false" (onCancel)="asidebarCancel()" (onSubmit)="asidebarSubmit()">
  
    <ng-container *ngIf="canvasConfig['canvasName'] == 'addCustomer'">
    
        <div class="row" *ngIf="customerForm" [formGroup]="customerForm">

            <div class="col-sm-6 pe-sm-1">
    
                <div class="form-group">
    
                    <label for="firstName"> First Name </label>
                    
                    <input type="text" class="form-control form-control-lg" id="firstName" formControlName="firstName" placeholder="Enter Name" [ngClass]="{ 'is-invalid': (formSubmitted.customerForm || cusf.firstName.touched) && cusf.firstName.errors }">
        
                    <div *ngIf="(formSubmitted.customerForm || cusf.firstName.touched) && cusf.firstName.errors" class="invalid-feedback">
            
                        <div *ngIf="cusf.firstName.errors.required">First Name is required</div>
        
                    </div>
        
                </div>
    
            </div>
    
            <div class="col-sm-6 ps-sm-1">
    
                <div class="form-group">
    
                    <label for="lastName"> Last Name </label>
                    
                    <input type="text" class="form-control form-control-lg" id="lastName" formControlName="lastName" placeholder="Enter Name" [ngClass]="{ 'is-invalid': (formSubmitted.customerForm || cusf.lastName.touched) && cusf.lastName.errors }">
        
                    <div *ngIf="(formSubmitted.customerForm || cusf.lastName.touched) && cusf.firstName.errors" class="invalid-feedback">
            
                        <div *ngIf="cusf.lastName.errors.required">Last Name is required</div>
        
                    </div>
        
                </div>
    
            </div>
    
            <div class="form-group">
    
                <label for="mobile">Mobile Number</label>
    
                <div class="input-group">
                
                    <div class="input-group-prepend me-1">
                
                        <ng-select formControlName="dialCode" [clearable]="false" placeholder="+91" class="form-control"
                            [ngClass]="{ 'is-invalid': (formSubmitted.customerForm || cusf.dialCode.touched) && cusf.dialCode.errors }">
                
                            <ng-option *ngFor="let dialCodeDet of masterList['dialCodeList']" [value]="dialCodeDet.dialCode">
                
                                <img class="country-flag" alt="{{ dialCodeDet.iso2 }}"
                                    src="http://purecatamphetamine.github.io/country-flag-icons/3x2/{{ dialCodeDet['iso2'] }}.svg" /> {{
                                dialCodeDet.dialCode }}
                
                            </ng-option>
                
                        </ng-select>
                
                    </div>
                
                    <input type="text" class="form-control" id="mobile" formControlName="mobile" placeholder="Enter"
                        [ngClass]="{ 'is-invalid': (formSubmitted.customerForm || cusf.mobile.touched) && cusf.mobile.errors }" numbersOnly maxlength="10">
                
                    <div *ngIf="(formSubmitted.customerForm || cusf.mobile.touched) && cusf.mobile.errors" class="invalid-feedback">
                
                        <div *ngIf="cusf.mobile.errors.required">Mobile number is required</div>
                
                    </div>
                
                </div>
    
            </div>
    
            <div class="col-md-8 pe-2 pe-md-1">
    
                <div class="form-group">
    
                    <label for="email"> Email </label>
                    
                    <input type="email" class="form-control form-control-lg" id="email" formControlName="email" placeholder="Enter Email" [ngClass]="{ 'is-invalid': (formSubmitted.customerForm || cusf.email.touched) && cusf.email.errors }">
        
                    <div *ngIf="(formSubmitted.customerForm || cusf.email.touched) && cusf.email.errors" class="invalid-feedback">
            
                        <div *ngIf="cusf.email.errors.required">Email is required</div>
        
                    </div>
        
                </div>
    
            </div>
    
            <div class="col-md-4 ps-2 ps-md-1">
    
                <div class="form-group">
    
                    <label for="gender">Gender</label>
    
                    <ng-select class="form-control form-control-lg border-2" placeholder="Select Gender" formControlName="gender" [clearable]="false">
    
                        <ng-option *ngFor="let gender of ['male','female','others']" [value]="gender">
    
                            {{ gender | uppercase }}
    
                        </ng-option>
    
                    </ng-select>
    
                </div>
    
            </div>

        </div>

    </ng-container>

</asidebar>