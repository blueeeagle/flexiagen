<div class="accountDetails-container" *ngIf="_.size(service._loading.loadingMap)==0">

    <div class="container-fluid">    

        <div class="row">

            <div class="page-header">ACCOUNT DETAILS</div>
        
        </div>

        <div class="row mt-2">

            <form [formGroup]="accountDetailsFrom">

                <div class="col-xl-6 col-lg-7">

                    <div class="card border-opacity-10 border-dark">

                        <div class="card-body">
        
                            <div class="form-group mb-4">
        
                                <label for="mobile"> Mobile No </label>
                
                                <input type="text" class="form-control form-control-lg" id="mobile" formControlName="mobile" placeholder="Enter" autocomplete="off" name="hidden" [ngClass]="{ 'is-invalid': (formSubmitted || f.mobile.touched) && f.mobile.errors }" maxlength="10" numbersOnly>

                                <div *ngIf="(formSubmitted || f.mobile.touched) && f.mobile.errors" class="invalid-feedback">
        
                                    <div *ngIf="f.mobile.errors.required">Mobile number is required</div>

                                </div>                            
                
                            </div>
        
                            <div class="form-group mb-4">
        
                                <label for="email">Email Id</label>
                
                                <input type="text" class="form-control form-control-lg" id="email" formControlName="email" placeholder="Enter" autocomplete="off" name="hidden" [ngClass]="{ 'is-invalid': (formSubmitted || f.email.touched) && f.email.errors }">

                                <div *ngIf="(formSubmitted || f.email.touched) && f.email.errors" class="invalid-feedback">

                                    <div *ngIf="f.email.errors.required && !f.email.errors.email">Email is required</div>

                                    <div *ngIf="f.email.errors.email && !f.email.errors.required">Email must be a valid email address</div>

                                </div>                            
                
                            </div>
        
                            <div class="row">

                                <div class="col">

                                    <div class="form-group mb-4">
        
                                        <label for="password">New Password</label>
                        
                                        <input type="password" class="form-control form-control-lg" id="password" formControlName="password" placeholder="Enter" autocomplete="off" name="hidden" [ngClass]="{ 'is-invalid': (formSubmitted || f.password.touched) && f.password.errors }" maxlength="15">

                                        <div *ngIf="(formSubmitted || f.password.touched) && f.password.errors" class="invalid-feedback">

                                            <div *ngIf="_.keys(f.password.errors).length == 1 && f.password.errors.required">Password is required</div>

                                            <div *ngIf="_.keys(f.password.errors).length == 1 && f.password.errors.minlength">Password must be at least 8 characters</div>

                                        </div>                                    
                        
                                    </div>

                                </div>

                                <div class="col">

                                    <div class="form-group mb-4">
        
                                        <label for="confirmPassword">Confirm Password</label>
                        
                                        <input type="text" class="form-control form-control-lg" id="confirmPassword" formControlName="confirmPassword" placeholder="Enter" autocomplete="off" name="hidden" [ngClass]="{ 'is-invalid': (formSubmitted || f.confirmPassword.touched) && f.confirmPassword.errors }" maxlength="15">

                                        <div *ngIf="(formSubmitted || f.confirmPassword.touched) && f.confirmPassword.errors" class="invalid-feedback">

                                            <div *ngIf="_.keys(f.confirmPassword.errors).length == 1 && f.confirmPassword.errors.required">Confirm password is required</div>
            
                                            <div *ngIf="_.keys(f.confirmPassword.errors).length == 1 && f.confirmPassword.errors.confirmedValidator">Passwords do not match.</div>
            
                                        </div>                                    
                        
                                    </div>
                                    
                                </div>

                                <div class="form-group mb-4">
        
                                    <label for="profile">Profile</label>

                                    <input type="file" class="upload" style="display: none;" #fileInput (change)="uploadFile($event)">
                        
                                    <br>
                                    
                                    <img [src]="f.profileImg.value" class="img-fluid btn p-0" [ngClass]="{ 'border-2 border': f.profileImg.value != '' }" style="max-width: 300px;" alt="profile" onerror="this.src = './assets/images/upload-img.png'" (click)="fileInput.click()"/>
                                    
                                </div>

                            </div>
        
                        </div>
        
                    </div>

                    <div class="row px-4 pt-4">
            
                        <div class="col-sm-6 order-sm-first order-last mt-3 mt-sm-0">

                            <button class="btn btn-block btn-lg w-100 btn-outline-primary">CLEAR</button>

                        </div>

                        <div class="col-sm-6">

                            <button class="btn btn-block btn-lg w-100 btn-primary"  [disabled]="(formSubmitted && accountDetailsFrom.invalid) || isLoading" (click)="submit()">

                                <ng-container *ngIf="!isLoading">SAVE</ng-container>
        
                                <div class="spinner-border text-white-50" *ngIf="isLoading" role="status">
        
                                    <span class="visually-hidden">Loading...</span>
        
                                </div>
        
                            </button>                           

                        </div>

                    </div>                

                </div>
                
            </form>

        </div>

    </div>
    
</div>
